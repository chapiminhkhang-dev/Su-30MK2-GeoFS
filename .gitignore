(()=>{

const ac = geofs.aircraft.instance;

// ================= BASIC INFO =================
ac.type = "SU-30MK2";
ac.country = "Vietnam";

// ================= HUD / RADAR =================
ac.radar = {
  enabled: true,
  range: 140,
  mode: "search",
  targets: []
};

ac.hud = {
  color: "green",
  brightness: 1,
  style: "russian"
};

// ================= IRST =================
ac.irst = {
  enabled: true,
  range: 60,
  track: true
};

// ================= RWR / ECM =================
ac.rwr = { enabled: true };
ac.ecm = { enabled: true };

// ================= FLIGHT CONTROL =================
ac.flyByWire = true;
ac.autopilot = {
  enabled: true,
  modes: ["alt", "hdg", "spd"]
};

// ================= ENGINES =================
ac.engines = {
  count: 2,
  sync: true,
  type: "AL-31F"
};

// ================= FUEL =================
ac.fuelSystem = {
  internal: true,
  external: true
};

// ================= EFFECTS =================
ac.addEffect && ac.addEffect("smoke");

// ================= LOAD MODELS =================
const BASE = "https://raw.githubusercontent.com/USERNAME/REPO/main/";

(async()=>{

  // Drop tanks (wings)
  for(const z of [5,-5]){
    const t = await ac.loadModel({url:BASE+"SU30_DropTank.glb",scale:1});
    t.setPosition([1.6,-1.3,z]);
  }

  // Drop tank (center)
  const tb = await ac.loadModel({url:BASE+"SU30_DropTank.glb",scale:1});
  tb.setPosition([0,-1.6,0]);

  // ECM pod
  const ecm = await ac.loadModel({url:BASE+"SU30_ECM_Pod.glb",scale:1});
  ecm.setPosition([0,-1.4,0]);

  // IRST
  const irst = await ac.loadModel({url:BASE+"SU30_IRST.glb",scale:1});
  irst.setPosition([3.4,1.1,0]);

})();

// ================= DATALINK (FAKE TARGETS) =================
setInterval(()=>{
  ac.radar.targets = geofs.aircraft.getNearbyAircraft?.() || [];
},1000);

console.log("SU-30MK2 FULL SYSTEM LOADED (NO WEAPONS)");

})();
